{
  "tables": [
    {
      "name": "user_role_mappings",
      "columns": [
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "role_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        }
      ],
      "primaryKeys": [
        "user_id",
        "role_id"
      ],
      "indexes": [
        {
          "name": "user_role_mappings_pkey",
          "columnName": "user_id",
          "isUnique": true
        },
        {
          "name": "user_role_mappings_pkey",
          "columnName": "role_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_role_mappings_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_role_mappings_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_role_mappings_role_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "artist_label_contracts",
      "columns": [
        {
          "name": "contract_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "artist_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "label_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "start_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "end_date",
          "type": "date",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "contract_id"
      ],
      "indexes": [
        {
          "name": "artist_label_contracts_pkey",
          "columnName": "contract_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "artist_label_contracts_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "artist_label_contracts_artist_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "artist_label_contracts_label_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "track_artists",
      "columns": [
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "artist_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "role",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": true
        }
      ],
      "primaryKeys": [
        "track_id",
        "artist_id",
        "role"
      ],
      "indexes": [
        {
          "name": "track_artists_pkey",
          "columnName": "track_id",
          "isUnique": true
        },
        {
          "name": "track_artists_pkey",
          "columnName": "artist_id",
          "isUnique": true
        },
        {
          "name": "track_artists_pkey",
          "columnName": "role",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "track_artists_role_check",
          "type": "CHECK"
        },
        {
          "name": "track_artists_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "track_artists_track_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "track_artists_artist_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "track_genres",
      "columns": [
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "genre_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        }
      ],
      "primaryKeys": [
        "track_id",
        "genre_id"
      ],
      "indexes": [
        {
          "name": "track_genres_pkey",
          "columnName": "track_id",
          "isUnique": true
        },
        {
          "name": "track_genres_pkey",
          "columnName": "genre_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "track_genres_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "track_genres_track_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "track_genres_genre_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "track_moods",
      "columns": [
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "mood_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        }
      ],
      "primaryKeys": [
        "track_id",
        "mood_id"
      ],
      "indexes": [
        {
          "name": "track_moods_pkey",
          "columnName": "track_id",
          "isUnique": true
        },
        {
          "name": "track_moods_pkey",
          "columnName": "mood_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "track_moods_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "track_moods_track_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "track_moods_mood_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "playlist_tracks",
      "columns": [
        {
          "name": "playlist_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "added_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "playlist_id",
        "track_id"
      ],
      "indexes": [
        {
          "name": "playlist_tracks_pkey",
          "columnName": "playlist_id",
          "isUnique": true
        },
        {
          "name": "playlist_tracks_pkey",
          "columnName": "track_id",
          "isUnique": true
        },
        {
          "name": "idx_playlist_tracks_playlist_id",
          "columnName": "playlist_id",
          "isUnique": false
        }
      ],
      "constraints": [
        {
          "name": "playlist_tracks_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "playlist_tracks_playlist_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "playlist_tracks_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_saved_tracks",
      "columns": [
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "saved_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "user_id",
        "track_id"
      ],
      "indexes": [
        {
          "name": "user_saved_tracks_pkey",
          "columnName": "user_id",
          "isUnique": true
        },
        {
          "name": "user_saved_tracks_pkey",
          "columnName": "track_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_saved_tracks_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_saved_tracks_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_saved_tracks_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_saved_albums",
      "columns": [
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "album_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "saved_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "user_id",
        "album_id"
      ],
      "indexes": [
        {
          "name": "user_saved_albums_pkey",
          "columnName": "user_id",
          "isUnique": true
        },
        {
          "name": "user_saved_albums_pkey",
          "columnName": "album_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_saved_albums_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_saved_albums_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_saved_albums_album_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "payments",
      "columns": [
        {
          "name": "payment_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "subscription_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "amount",
          "type": "numeric",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "payment_date",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "payment_id"
      ],
      "indexes": [
        {
          "name": "payments_pkey",
          "columnName": "payment_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "payments_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "payments_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "payments_subscription_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "listening_history",
      "columns": [
        {
          "name": "history_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "listened_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "duration_seconds",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "history_id"
      ],
      "indexes": [
        {
          "name": "listening_history_pkey",
          "columnName": "history_id",
          "isUnique": true
        },
        {
          "name": "idx_listening_history_user_id",
          "columnName": "user_id",
          "isUnique": false
        },
        {
          "name": "idx_listening_history_track_id",
          "columnName": "track_id",
          "isUnique": false
        }
      ],
      "constraints": [
        {
          "name": "listening_history_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "listening_history_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "listening_history_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_recommendations",
      "columns": [
        {
          "name": "recommendation_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "recommendation_strength",
          "type": "double precision",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "recommendation_id"
      ],
      "indexes": [
        {
          "name": "user_recommendations_pkey",
          "columnName": "recommendation_id",
          "isUnique": true
        },
        {
          "name": "idx_user_recommendations_user_id",
          "columnName": "user_id",
          "isUnique": false
        }
      ],
      "constraints": [
        {
          "name": "user_recommendations_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_recommendations_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_recommendations_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_followers",
      "columns": [
        {
          "name": "follower_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "followed_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "followed_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "follower_id",
        "followed_id"
      ],
      "indexes": [
        {
          "name": "user_followers_pkey",
          "columnName": "follower_id",
          "isUnique": true
        },
        {
          "name": "user_followers_pkey",
          "columnName": "followed_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_followers_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_followers_follower_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_followers_followed_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_activity",
      "columns": [
        {
          "name": "activity_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "activity_type",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "activity_data",
          "type": "jsonb",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "activity_id"
      ],
      "indexes": [
        {
          "name": "user_activity_pkey",
          "columnName": "activity_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_activity_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_activity_user_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "lyrics",
      "columns": [
        {
          "name": "lyric_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "content",
          "type": "text",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "language",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "lyric_id"
      ],
      "indexes": [
        {
          "name": "lyrics_pkey",
          "columnName": "lyric_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "lyrics_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "lyrics_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "copyrights",
      "columns": [
        {
          "name": "copyright_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "copyright_text",
          "type": "text",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "copyright_type",
          "type": "character varying",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "copyright_id"
      ],
      "indexes": [
        {
          "name": "copyrights_pkey",
          "columnName": "copyright_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "copyrights_copyright_type_check",
          "type": "CHECK"
        },
        {
          "name": "copyrights_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "copyrights_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "radio_tracks",
      "columns": [
        {
          "name": "station_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "weight",
          "type": "double precision",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "station_id",
        "track_id"
      ],
      "indexes": [
        {
          "name": "radio_tracks_pkey",
          "columnName": "station_id",
          "isUnique": true
        },
        {
          "name": "radio_tracks_pkey",
          "columnName": "track_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "radio_tracks_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "radio_tracks_station_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "radio_tracks_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "podcast_episodes",
      "columns": [
        {
          "name": "episode_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "podcast_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "title",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "description",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "duration_seconds",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "release_date",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "episode_id"
      ],
      "indexes": [
        {
          "name": "podcast_episodes_pkey",
          "columnName": "episode_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "podcast_episodes_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "podcast_episodes_podcast_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_podcast_subscriptions",
      "columns": [
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "podcast_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "subscribed_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "user_id",
        "podcast_id"
      ],
      "indexes": [
        {
          "name": "user_podcast_subscriptions_pkey",
          "columnName": "user_id",
          "isUnique": true
        },
        {
          "name": "user_podcast_subscriptions_pkey",
          "columnName": "podcast_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_podcast_subscriptions_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_podcast_subscriptions_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_podcast_subscriptions_podcast_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "daily_track_stats",
      "columns": [
        {
          "name": "stat_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "play_count",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "unique_listeners",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "stat_id"
      ],
      "indexes": [
        {
          "name": "daily_track_stats_pkey",
          "columnName": "stat_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "daily_track_stats_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "daily_track_stats_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_retention",
      "columns": [
        {
          "name": "retention_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "retention_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "days_active",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "retention_id"
      ],
      "indexes": [
        {
          "name": "user_retention_pkey",
          "columnName": "retention_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_retention_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_retention_user_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "reported_content",
      "columns": [
        {
          "name": "report_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "reporter_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "content_type",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "content_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "reason",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "status",
          "type": "character varying",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "report_id"
      ],
      "indexes": [
        {
          "name": "reported_content_pkey",
          "columnName": "report_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "reported_content_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "reported_content_reporter_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "artist_stats",
      "columns": [
        {
          "name": "stat_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "artist_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "total_plays",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "unique_listeners",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "follower_count",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "stat_id"
      ],
      "indexes": [
        {
          "name": "artist_stats_pkey",
          "columnName": "stat_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "artist_stats_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "artist_stats_artist_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "ad_placements",
      "columns": [
        {
          "name": "placement_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "campaign_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "plays",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "placement_id"
      ],
      "indexes": [
        {
          "name": "ad_placements_pkey",
          "columnName": "placement_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "ad_placements_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "ad_placements_campaign_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "ad_placements_track_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_roles",
      "columns": [
        {
          "name": "role_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "role_name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "role_id"
      ],
      "indexes": [
        {
          "name": "user_roles_pkey",
          "columnName": "role_id",
          "isUnique": true
        },
        {
          "name": "user_roles_role_name_key",
          "columnName": "role_name",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_roles_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_roles_role_name_key",
          "type": "UNIQUE"
        }
      ]
    },
    {
      "name": "genres",
      "columns": [
        {
          "name": "genre_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "genre_id"
      ],
      "indexes": [
        {
          "name": "genres_pkey",
          "columnName": "genre_id",
          "isUnique": true
        },
        {
          "name": "genres_name_key",
          "columnName": "name",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "genres_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "genres_name_key",
          "type": "UNIQUE"
        }
      ]
    },
    {
      "name": "moods",
      "columns": [
        {
          "name": "mood_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "mood_id"
      ],
      "indexes": [
        {
          "name": "moods_pkey",
          "columnName": "mood_id",
          "isUnique": true
        },
        {
          "name": "moods_name_key",
          "columnName": "name",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "moods_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "moods_name_key",
          "type": "UNIQUE"
        }
      ]
    },
    {
      "name": "playlists",
      "columns": [
        {
          "name": "playlist_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "is_public",
          "type": "boolean",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "playlist_id"
      ],
      "indexes": [
        {
          "name": "playlists_pkey",
          "columnName": "playlist_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "playlists_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "playlists_user_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "user_subscriptions",
      "columns": [
        {
          "name": "subscription_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "plan_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "start_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "end_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "subscription_id"
      ],
      "indexes": [
        {
          "name": "user_subscriptions_pkey",
          "columnName": "subscription_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "user_subscriptions_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "user_subscriptions_user_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "user_subscriptions_plan_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "radio_stations",
      "columns": [
        {
          "name": "station_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "description",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "station_id"
      ],
      "indexes": [
        {
          "name": "radio_stations_pkey",
          "columnName": "station_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "radio_stations_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "podcasts",
      "columns": [
        {
          "name": "podcast_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "creator_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "title",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "description",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "podcast_id"
      ],
      "indexes": [
        {
          "name": "podcasts_pkey",
          "columnName": "podcast_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "podcasts_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "podcasts_creator_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "ad_campaigns",
      "columns": [
        {
          "name": "campaign_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "advertiser_name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "start_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "end_date",
          "type": "date",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "budget",
          "type": "numeric",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "campaign_id"
      ],
      "indexes": [
        {
          "name": "ad_campaigns_pkey",
          "columnName": "campaign_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "ad_campaigns_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "tracks",
      "columns": [
        {
          "name": "track_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "title",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "album_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "duration_seconds",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "track_number",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "is_explicit",
          "type": "boolean",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "track_id"
      ],
      "indexes": [
        {
          "name": "tracks_pkey",
          "columnName": "track_id",
          "isUnique": true
        },
        {
          "name": "idx_tracks_album_id",
          "columnName": "album_id",
          "isUnique": false
        }
      ],
      "constraints": [
        {
          "name": "tracks_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "tracks_album_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "subscription_plans",
      "columns": [
        {
          "name": "plan_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "price",
          "type": "numeric",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "duration_days",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "plan_id"
      ],
      "indexes": [
        {
          "name": "subscription_plans_pkey",
          "columnName": "plan_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "subscription_plans_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "podcast_creators",
      "columns": [
        {
          "name": "creator_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "bio",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "creator_id"
      ],
      "indexes": [
        {
          "name": "podcast_creators_pkey",
          "columnName": "creator_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "podcast_creators_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "albums",
      "columns": [
        {
          "name": "album_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "title",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "artist_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "label_id",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "release_date",
          "type": "date",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "album_type",
          "type": "character varying",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "album_id"
      ],
      "indexes": [
        {
          "name": "albums_pkey",
          "columnName": "album_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "albums_album_type_check",
          "type": "CHECK"
        },
        {
          "name": "albums_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "albums_artist_id_fkey",
          "type": "FOREIGN KEY"
        },
        {
          "name": "albums_label_id_fkey",
          "type": "FOREIGN KEY"
        }
      ]
    },
    {
      "name": "artists",
      "columns": [
        {
          "name": "artist_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "bio",
          "type": "text",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "formed_year",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "artist_id"
      ],
      "indexes": [
        {
          "name": "artists_pkey",
          "columnName": "artist_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "artists_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "labels",
      "columns": [
        {
          "name": "label_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "name",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "founded_year",
          "type": "integer",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "label_id"
      ],
      "indexes": [
        {
          "name": "labels_pkey",
          "columnName": "label_id",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "labels_pkey",
          "type": "PRIMARY KEY"
        }
      ]
    },
    {
      "name": "users",
      "columns": [
        {
          "name": "user_id",
          "type": "integer",
          "isNullable": false,
          "isPrimaryKey": true
        },
        {
          "name": "username",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "email",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "password_hash",
          "type": "character varying",
          "isNullable": false,
          "isPrimaryKey": false
        },
        {
          "name": "date_of_birth",
          "type": "date",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "country",
          "type": "character varying",
          "isNullable": true,
          "isPrimaryKey": false
        },
        {
          "name": "created_at",
          "type": "timestamp without time zone",
          "isNullable": true,
          "isPrimaryKey": false
        }
      ],
      "primaryKeys": [
        "user_id"
      ],
      "indexes": [
        {
          "name": "users_pkey",
          "columnName": "user_id",
          "isUnique": true
        },
        {
          "name": "users_username_key",
          "columnName": "username",
          "isUnique": true
        },
        {
          "name": "users_email_key",
          "columnName": "email",
          "isUnique": true
        }
      ],
      "constraints": [
        {
          "name": "users_pkey",
          "type": "PRIMARY KEY"
        },
        {
          "name": "users_username_key",
          "type": "UNIQUE"
        },
        {
          "name": "users_email_key",
          "type": "UNIQUE"
        }
      ]
    }
  ],
  "relationships": [
    {
      "sourceTable": "user_role_mappings",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_role_mappings",
      "sourceColumn": "role_id",
      "targetTable": "user_roles",
      "targetColumn": "role_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "artist_label_contracts",
      "sourceColumn": "artist_id",
      "targetTable": "artists",
      "targetColumn": "artist_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "artist_label_contracts",
      "sourceColumn": "label_id",
      "targetTable": "labels",
      "targetColumn": "label_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "albums",
      "sourceColumn": "artist_id",
      "targetTable": "artists",
      "targetColumn": "artist_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "albums",
      "sourceColumn": "label_id",
      "targetTable": "labels",
      "targetColumn": "label_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "tracks",
      "sourceColumn": "album_id",
      "targetTable": "albums",
      "targetColumn": "album_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_artists",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_artists",
      "sourceColumn": "artist_id",
      "targetTable": "artists",
      "targetColumn": "artist_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_genres",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_genres",
      "sourceColumn": "genre_id",
      "targetTable": "genres",
      "targetColumn": "genre_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_moods",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "track_moods",
      "sourceColumn": "mood_id",
      "targetTable": "moods",
      "targetColumn": "mood_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "playlists",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "playlist_tracks",
      "sourceColumn": "playlist_id",
      "targetTable": "playlists",
      "targetColumn": "playlist_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "playlist_tracks",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_saved_tracks",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_saved_tracks",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_saved_albums",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_saved_albums",
      "sourceColumn": "album_id",
      "targetTable": "albums",
      "targetColumn": "album_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_subscriptions",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_subscriptions",
      "sourceColumn": "plan_id",
      "targetTable": "subscription_plans",
      "targetColumn": "plan_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "payments",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "payments",
      "sourceColumn": "subscription_id",
      "targetTable": "user_subscriptions",
      "targetColumn": "subscription_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "listening_history",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "listening_history",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_recommendations",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_recommendations",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_followers",
      "sourceColumn": "follower_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_followers",
      "sourceColumn": "followed_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_activity",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "lyrics",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "copyrights",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "radio_tracks",
      "sourceColumn": "station_id",
      "targetTable": "radio_stations",
      "targetColumn": "station_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "radio_tracks",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "podcasts",
      "sourceColumn": "creator_id",
      "targetTable": "podcast_creators",
      "targetColumn": "creator_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "podcast_episodes",
      "sourceColumn": "podcast_id",
      "targetTable": "podcasts",
      "targetColumn": "podcast_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_podcast_subscriptions",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_podcast_subscriptions",
      "sourceColumn": "podcast_id",
      "targetTable": "podcasts",
      "targetColumn": "podcast_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "daily_track_stats",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "user_retention",
      "sourceColumn": "user_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "reported_content",
      "sourceColumn": "reporter_id",
      "targetTable": "users",
      "targetColumn": "user_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "artist_stats",
      "sourceColumn": "artist_id",
      "targetTable": "artists",
      "targetColumn": "artist_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "ad_placements",
      "sourceColumn": "campaign_id",
      "targetTable": "ad_campaigns",
      "targetColumn": "campaign_id",
      "isInferred": false,
      "confidence": 1
    },
    {
      "sourceTable": "ad_placements",
      "sourceColumn": "track_id",
      "targetTable": "tracks",
      "targetColumn": "track_id",
      "isInferred": false,
      "confidence": 1
    }
  ],
  "circularDependencies": [],
  "junctionTables": [
    "user_role_mappings",
    "track_artists",
    "track_genres",
    "track_moods",
    "playlist_tracks",
    "user_saved_tracks",
    "user_saved_albums",
    "user_followers",
    "radio_tracks",
    "user_podcast_subscriptions"
  ],
  "storedProcedures": [
    {
      "name": "update_track_popularity",
      "definition": "CREATE OR REPLACE FUNCTION public.update_track_popularity()\n RETURNS void\n LANGUAGE plpgsql\nAS $function$\nBEGIN\n  -- Update track popularity based on recent listening history\n  UPDATE tracks t\n  SET popularity = subquery.popularity\n  FROM (\n    SELECT track_id, COUNT(*) as popularity\n    FROM listening_history\n    WHERE listened_at >= CURRENT_DATE - INTERVAL '30 days'\n    GROUP BY track_id\n  ) AS subquery\n  WHERE t.track_id = subquery.track_id;\nEND;\n$function$\n"
    },
    {
      "name": "get_user_recommendations",
      "definition": "CREATE OR REPLACE FUNCTION public.get_user_recommendations(user_id_param integer)\n RETURNS TABLE(track_id integer, title character varying, artist_name character varying)\n LANGUAGE plpgsql\nAS $function$\nBEGIN\n  RETURN QUERY\n  SELECT t.track_id, t.title, a.name AS artist_name\n  FROM tracks t\n  JOIN track_artists ta ON t.track_id = ta.track_id\n  JOIN artists a ON ta.artist_id = a.artist_id\n  WHERE t.track_id IN (\n    SELECT track_id\n    FROM listening_history\n    WHERE user_id = user_id_param\n    GROUP BY track_id\n    ORDER BY COUNT(*) DESC\n    LIMIT 10\n  );\nEND;\n$function$\n"
    }
  ],
  "views": [
    {
      "name": "top_tracks_last_30_days",
      "definition": " SELECT t.track_id,\n    t.title,\n    a.name AS artist_name,\n    count(*) AS play_count\n   FROM (((listening_history lh\n     JOIN tracks t ON ((lh.track_id = t.track_id)))\n     JOIN track_artists ta ON ((t.track_id = ta.track_id)))\n     JOIN artists a ON ((ta.artist_id = a.artist_id)))\n  WHERE (lh.listened_at >= (CURRENT_DATE - '30 days'::interval))\n  GROUP BY t.track_id, t.title, a.name\n  ORDER BY (count(*)) DESC\n LIMIT 100;"
    },
    {
      "name": "user_playlist_counts",
      "definition": " SELECT u.user_id,\n    u.username,\n    count(DISTINCT p.playlist_id) AS playlist_count\n   FROM (users u\n     LEFT JOIN playlists p ON ((u.user_id = p.user_id)))\n  GROUP BY u.user_id, u.username;"
    }
  ]
}